extends layout

block content
  form(method='POST', action='/tasks')
    input(type='hidden' name='_csrf' value=csrfToken)
    .input-group.mb-3
      input.form-control(type='text', name='taskName', placeholder='New task...', required)
      button.btn.btn-primary(type='submit') Add Task

  ul.list-group
    each task in tasks
      li.list-group-item.d-flex.justify-content-between.align-items-center
        span(class=task.completed ? 'text-decoration-line-through' : '')= task.taskName
        .btn-group
          if !task.completed
            form(method='POST', action=`/tasks/${task._id}/complete`)
              input(type='hidden' name='_csrf' value=csrfToken)
              button.btn.btn-sm.btn-success(type='submit') Complete
          form(method='POST', action=`/tasks/${task._id}/delete`)
            input(type='hidden' name='_csrf' value=csrfToken)
            button.btn.btn-sm.btn-danger(type='submit') Delete